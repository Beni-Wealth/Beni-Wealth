<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Beni-Wealth ‚Äî Dashboard</title>

  <!-- Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">

  <meta property="og:type" content="website">
  <meta property="og:title" content="Beni-Wealth ‚Äî Earn Steadily">
  <meta property="og:description" content="Complete micro-tasks, earn instantly, advertise with transparent metrics and fast payouts.">
  <meta property="og:image" content="https://res.cloudinary.com/dq7fpxfbc/image/upload/c_fill,w_1200,h_630/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#2fe0b8">

  <style>
    :root{
      --bg-1: #0b0613;
      --bg-2: #0f0820;
      --text: #eaf2ff;
      --muted: rgba(255,255,255,0.62);
      --accent-grad: linear-gradient(135deg, #8446ff, #5b3bff 45%, #6ce2c8 100%);
      --radius: 16px;
      --container-w: 980px;
      font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1000px 600px at 10% 10%, rgba(123,61,255,0.10), transparent),
                  radial-gradient(900px 500px at 90% 90%, rgba(47,224,184,0.06), transparent),
                  linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:var(--text);
      padding:20px;
      display:flex;
      justify-content:center;
    }
    .phone {
      width:100%;
      max-width:var(--container-w);
      min-height:600px;
      border-radius:18px;
      padding:18px 18px 100px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow: 0 18px 60px rgba(0,0,0,0.6);
      overflow:auto;
      position:relative;
      margin:20px auto;
    }
    .top { display:flex; gap:12px; align-items:center; margin-bottom:18px; }
    .avatar {
      width:56px; height:56px; border-radius:50%;
      display:grid; place-items:center;
      font-size:18px; font-weight:800;
      background: var(--accent-grad); color:#041219;
      box-shadow: 0 10px 34px rgba(87,52,164,0.26);
    }
    .avatar .presence {
      position:absolute; right:4px; bottom:4px;
      width:12px; height:12px; border-radius:50%;
      background:#00ff9d; border:2px solid rgba(0,0,0,0.22);
    }
    .greeting h2{margin:0;font-size:17px;font-weight:700;}
    .greeting p{margin:6px 0 0; color:var(--muted); font-size:12px;}

    .asset-card{margin:8px 0 16px; border-radius:12px; padding:14px; background: rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03);}
    .asset-top{display:flex;align-items:center;justify-content:space-between;}
    .asset-amount{font-size:28px;font-weight:800;}
    .asset-sub{color:var(--muted); font-size:12px;}
    .asset-approx{color:var(--muted); font-size:12px;}

    .eye-btn{width:44px;height:44px;border-radius:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);cursor:pointer;display:grid;place-items:center;}

    .pill{flex:1;padding:12px;border-radius:999px;text-align:center;font-weight:700; cursor:pointer; user-select:none;}
    .pill.primary{background: linear-gradient(90deg, #7a5fff, #35d6b1); color:#041219;}
    .pill.ghost{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.04);}

    .menu{margin-top:18px;display:flex;flex-direction:column;gap:12px;}
    .menu-item{display:flex;justify-content:space-between;gap:12px;padding:12px 14px;border-radius:12px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02);cursor:pointer;}
    .menu-left{display:flex;gap:12px;align-items:center;}
    .menu-icon{width:44px;height:44px;border-radius:10px;display:grid;place-items:center;background:rgba(255,255,255,0.02);font-size:18px;}
    .menu-text h4{margin:0;font-size:14px;color:#e7e9ff;}
    .menu-text p{margin:4px 0 0;color:var(--muted);font-size:12px;}

    .logout{margin-top:20px;padding:12px;border-radius:999px;text-align:center;font-weight:700;background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);cursor:pointer;}

    .bottom-nav{position:fixed;left:50%;transform:translateX(-50%);bottom:20px;height:74px;width:calc(min(var(--container-w),100%) - 28px);background:rgba(255,255,255,0.02);border-radius:38px;display:flex;justify-content:space-between;align-items:center;padding:10px 14px;box-shadow:0 18px 60px rgba(0,0,0,0.45);}
    .nav-btn{display:flex;flex-direction:column;align-items:center;gap:6px;color:var(--muted);font-size:11px;cursor:pointer;}
    .icon-wrap{width:44px;height:44px;border-radius:10px;display:grid;place-items:center;background:rgba(255,255,255,0.02);font-size:18px;}
    .nav-center .center-btn{width:78px;height:78px;border-radius:50%;background:linear-gradient(135deg,#7a5fff,#35d6b1);color:#041219;font-size:26px;display:grid;place-items:center;transform:translateY(-18px);border:none;cursor:pointer;}
    
    .overlay{position:fixed;inset:0;display:none;z-index:1100;}
    .overlay.open{display:block;}
    .overlay-backdrop{position:absolute;inset:0;background:rgba(2,6,23,0.6);backdrop-filter:blur(6px);}
    .overlay-panel{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(480px,92%);background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.04);border-radius:12px;padding:18px;box-shadow:0 30px 80px rgba(4,6,20,0.6);}
    .overlay-close{position:absolute;right:12px;top:12px;background:transparent;border:none;color:var(--muted);font-size:18px;cursor:pointer;}
    .overlay-options{display:flex;flex-direction:column;gap:10px;}
    .overlay-option{display:block;padding:12px;text-align:center;border-radius:10px;font-weight:800;text-decoration:none;color:#041219;background:linear-gradient(90deg,#7a5fff,#35d6b1);}
  </style>

</head>
<body>
  <div class="phone" role="main" aria-live="polite">

    <div class="top">
      <div class="avatar" id="avatar">U<span class="presence"></span></div>
      <div class="greeting">
        <h2 id="greeting">Hi, User</h2>
        <p id="uidline">UID: -</p>
      </div>
      <button id="settingsBtn" class="eye-btn" title="Settings">‚öôÔ∏è</button>
    </div>

    <div class="asset-card">
      <div class="asset-top">
        <div>
          <div class="asset-sub">Total Assets (NGN)</div>
          <div class="asset-amount" id="balance">‚Ç¶0.00</div>
          <div class="asset-approx" id="approx">‚âà ‚Ç¶0.00</div>
        </div>
        <button id="eyeBtn" class="eye-btn" aria-pressed="false">üëÅÔ∏è</button>
      </div>

      <div class="action-row">
        <div id="rechargeBtn" class="pill primary">Recharge</div>
        <div id="withdrawBtn" class="pill ghost">Withdraw</div>
      </div>
    </div>

    <nav class="menu">
      <div id="ordersItem" class="menu-item"><div class="menu-left"><div class="menu-icon">üìÑ</div><div class="menu-text"><h4>My Orders</h4><p>orders overview</p></div></div>‚Ä∫</div>
      <div id="tasksItem" class="menu-item"><div class="menu-left"><div class="menu-icon">üîé</div><div class="menu-text"><h4>Available tasks</h4><p>market & promotions</p></div></div>‚Ä∫</div>
      <div id="earningsItem" class="menu-item"><div class="menu-left"><div class="menu-icon">üìà</div><div class="menu-text"><h4>Earnings Report</h4><p>performance</p></div></div>‚Ä∫</div>
      <div id="referralsItem" class="menu-item"><div class="menu-left"><div class="menu-icon">üë•</div><div class="menu-text"><h4>Referrals</h4><p>friends who joined through you</p></div></div>‚Ä∫</div>
      <div id="contestsItem" class="menu-item"><div class="menu-left"><div class="menu-icon">üèÜ</div><div class="menu-text"><h4>Contests</h4><p>climb the leaderboard, earn big</p></div></div>‚Ä∫</div>
      <div id="moreItem" class="menu-item" aria-haspopup="dialog">
        <div class="menu-left"><div class="menu-icon">‚ãØ</div><div class="menu-text"><h4>More</h4><p>extra options & links</p></div></div>‚Ä∫
      </div>
    </nav>

    <button id="logoutBtn" class="logout">Log out</button>

    <div class="bottom-nav">
      <div id="navHome" class="nav-btn"><div class="icon-wrap">üè†</div>Home</div>
      <div id="navConvert" class="nav-btn"><div class="icon-wrap">üîó</div>Shortlinks</div>
      <div class="nav-center"><button id="navCenter" class="center-btn">‚ûï</button></div>
      <div id="navNews" class="nav-btn"><div class="icon-wrap">üí¨</div>News</div>
      <div id="navAssets" class="nav-btn"><div class="icon-wrap">üë§</div>Assets</div>
    </div>

    <a id="chatFab" class="chat-fab" href="contact.html" title="Contact support">üí¨</a>

    <!-- MORE Overlay -->
    <div id="moreOverlay" class="overlay" aria-hidden="true">
      <div class="overlay-backdrop"></div>
      <div class="overlay-panel">
        <button class="overlay-close" aria-label="Close">‚úï</button>
        <h3>More options</h3>
        <div class="overlay-options">
          <a href="ptc.html" class="overlay-option">PTC</a>
          <a href="bet.html" class="overlay-option">Stake</a>
          <a href="mini-games.html" class="overlay-option">Games</a>
        </div>
      </div>
    </div>

  </div>

  <script type="module">
    import { initializeApp, getApps } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore, doc, onSnapshot, getDoc, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDy_L7uJeoaWXbUB-LVk_fBv8yHeRjNjZk",
      authDomain: "beni-wealths.firebaseapp.com",
      projectId: "beni-wealths",
      storageBucket: "beni-wealths.firebasestorage.app",
      messagingSenderId: "807950483822",
      appId: "1:807950483822:web:e10fa87307e041c4d8417f",
      measurementId: "G-Z2XP3YN6NS"
    };

    if(!getApps().length) initializeApp(firebaseConfig);
    const auth = getAuth();
    const db = getFirestore();

    const avatarEl = document.getElementById('avatar');
    const greetingEl = document.getElementById('greeting');
    const uidLine = document.getElementById('uidline');
    const balanceEl = document.getElementById('balance');
    const approxEl = document.getElementById('approx');
    const eyeBtn = document.getElementById('eyeBtn');

    const rechargeBtn = document.getElementById('rechargeBtn');
    const withdrawBtn = document.getElementById('withdrawBtn');
    const ordersItem = document.getElementById('ordersItem');
    const tasksItem = document.getElementById('tasksItem');
    const earningsItem = document.getElementById('earningsItem');
    const referralsItem = document.getElementById('referralsItem');
    const contestsItem = document.getElementById('contestsItem');
    const moreItem = document.getElementById('moreItem');
    const moreOverlay = document.getElementById('moreOverlay');
    const overlayClose = moreOverlay.querySelector('.overlay-close');

    const logoutBtn = document.getElementById('logoutBtn');
    const navHome = document.getElementById('navHome');
    const navConvert = document.getElementById('navConvert');
    const navCenter = document.getElementById('navCenter');
    const navNews = document.getElementById('navNews');
    const navAssets = document.getElementById('navAssets');
    const chatFab = document.getElementById('chatFab');

    function formatN(n){const num=Number(n||0);return '‚Ç¶'+num.toLocaleString('en-NG',{minimumFractionDigits:2,maximumFractionDigits:2});}

    function makeHiddenKey(uid){return `bw_balance_hidden_${uid||'guest'}`;}
    function getPersistedHidden(uid){try{return localStorage.getItem(makeHiddenKey(uid))==='1';}catch{return false;}}
    function setPersistedHidden(uid,h){try{localStorage.setItem(makeHiddenKey(uid),h?'1':'0');}catch{}}

    function setBalanceVisibility(hidden,uid){
      setPersistedHidden(uid,hidden);
      eyeBtn.setAttribute('aria-pressed',hidden?'true':'false');
      eyeBtn.textContent = hidden?'üôà':'üëÅÔ∏è';
      if(hidden){
        balanceEl.textContent='‚Ç¶‚Ä¢‚Ä¢‚Ä¢‚Ä¢'; approxEl.textContent='‚âà ‚Ç¶‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
      } else {
        balanceEl.textContent=balanceEl.dataset.realText||'‚Ç¶0.00';
        approxEl.textContent=approxEl.dataset.realText||`‚âà ${balanceEl.dataset.realText||'‚Ç¶0.00'}`;
      }
    }

    eyeBtn.addEventListener('click',()=>{
      const uid=eyeBtn.dataset.uid||'guest';
      setBalanceVisibility(!getPersistedHidden(uid),uid);
    });

    moreItem.addEventListener('click',(e)=>{e.preventDefault();moreOverlay.classList.add('open');});
    overlayClose.addEventListener('click',()=>moreOverlay.classList.remove('open'));
    moreOverlay.querySelector('.overlay-backdrop').addEventListener('click',()=>moreOverlay.classList.remove('open'));

    settingsBtn.addEventListener('click',()=>window.location.href='profile.html');
    rechargeBtn.addEventListener('click',()=>window.location.href='recharge.html');
    withdrawBtn.addEventListener('click',()=>window.location.href='withdraw.html');

    ordersItem.addEventListener('click',()=>window.location.href='orders.html');
    tasksItem.addEventListener('click',()=>window.location.href='tasks.html');
    earningsItem.addEventListener('click',()=>window.location.href='earnings.html');
    contestsItem.addEventListener('click',()=>window.location.href='contests.html');
    referralsItem.addEventListener('click',()=>window.location.href='referrals.html');

    logoutBtn.addEventListener('click',async()=>{
      await signOut(auth).catch(()=>{});
      window.location.href='index.html';
    });

    navHome.addEventListener('click',()=>window.location.href='catalog.html');
    navConvert.addEventListener('click',()=>window.location.href='convert.html');
    navCenter.addEventListener('click',()=>window.location.href='center.html');
    navNews.addEventListener('click',()=>window.location.href='news.html');
    navAssets.addEventListener('click',()=>window.location.href='dashboard.html');

    chatFab.addEventListener('keydown',(e)=>{if(e.key==='Enter')window.location.href='contact.html';});

    onAuthStateChanged(auth,async(user)=>{
      eyeBtn.dataset.uid='guest';
      setBalanceVisibility(getPersistedHidden('guest'),'guest');

      if(!user){
        uidLine.textContent='UID: -';
        avatarEl.textContent='U';
        balanceEl.dataset.realText=formatN(0);
        approxEl.dataset.realText=`‚âà ${formatN(0)}`;
        return;
      }

      eyeBtn.dataset.uid=user.uid;
      setBalanceVisibility(getPersistedHidden(user.uid),user.uid);
      uidLine.textContent=`UID: ${user.uid.slice(0,6)}`;

      const uRef=doc(db,'users',user.uid);
      onSnapshot(uRef,async(snap)=>{
        if(snap.exists()){
          const d=snap.data();
          const username=d.username||user.displayName||'User';
          greetingEl.textContent=`Hi, ${username}`;
          avatarEl.textContent=username.charAt(0).toUpperCase();

          const bal=(d.balance!==undefined)?Number(d.balance):0;
          balanceEl.dataset.realText=formatN(bal);
          approxEl.dataset.realText=`‚âà ${formatN(bal)}`;
          setBalanceVisibility(getPersistedHidden(user.uid),user.uid);
        }
      });
    });
  </script>
</body>
</html>
