<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Beni-Wealth — Memory Flip)</title>

  <!-- Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300,400,600,700&display=swap" rel="stylesheet"/>

  <!-- Favicons & Social preview -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <meta name="msapplication-TileImage" content="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <meta name="theme-color" content="#2fe0b8">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Beni-Wealth — Memory Flip">
  <meta property="og:description" content="Match pairs to score. Win to earn ₦50. Entry fee: ₦20.">
  <meta property="og:image" content="https://res.cloudinary.com/dq7fpxfbc/image/upload/c_fill,w_1200,h_630/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <meta name="twitter:card" content="summary_large_image">

  <style>
    :root{
      --bg1:#071021; --bg2:#0d1224; --muted:rgba(255,255,255,0.66); --text:#eaf2ff;
      --accent:#7a5fff; --success:#10b981; --danger:#ef4444;
      font-family:"Poppins",system-ui,Roboto,Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:radial-gradient(800px 400px at 10% 10%, rgba(122,95,255,0.04), transparent), linear-gradient(180deg,var(--bg1),var(--bg2)); color:var(--text);-webkit-font-smoothing:antialiased}
    .wrap{max-width:980px;margin:18px auto;padding:14px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#35d6b1);display:grid;place-items:center;color:#041219;font-weight:800}
    .title{font-weight:800}
    .muted{color:var(--muted);font-size:13px}
    .controls{display:flex;gap:10px;align-items:center}
    .btn{background:linear-gradient(90deg,var(--accent),#35d6b1);border:0;padding:10px 14px;border-radius:10px;color:#041219;font-weight:800;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}
    .layout{display:flex;gap:16px;flex-wrap:wrap}
    .left{flex:1;min-width:260px}
    .right{width:320px;min-width:220px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.02)}

    .board{display:grid;grid-template-columns:repeat(4, minmax(56px, 1fr));gap:10px;margin-top:12px;width:100%;touch-action: manipulation;}

    .tile{aspect-ratio:1/1;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:grid;place-items:center;font-weight:800;font-size:clamp(14px,3.8vw,22px);cursor:pointer;user-select:none;position:relative;border:2px solid rgba(255,255,255,0.03);transition:transform .12s ease, background .18s ease}
    .tile:hover{transform:translateY(-4px)}
    .tile.flipped{background:linear-gradient(90deg,#fff,#fff0);color:#041219}
    .tile.matched{background:rgba(16,185,129,0.12);border-color:rgba(16,185,129,0.6);color:#041219;cursor:default}

    .hud{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:8px}
    .log{margin-top:12px;max-height:260px;overflow:auto;padding:10px;border-radius:8px;background:rgba(255,255,255,0.01);font-size:13px}
    .muted-note{color:var(--muted);font-size:13px;margin-top:8px}
    .center{display:flex;align-items:center;justify-content:center}
    .modal{position:fixed;left:0;top:0;right:0;bottom:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.55);z-index:9999}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,0.03), rgba(255,255,255,0.01));padding:14px;border-radius:12px;min-width:260px;text-align:center;border:1px solid rgba(255,255,255,0.03)}
  </style>
</head>
<body>
  <!-- ... all your unchanged HTML UI elements above like header, board, etc ... -->

  <script type="module">
    import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, collection, runTransaction, serverTimestamp, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    // … all your unchanged firebase and UI setup code …

    // Bot logic — now more gullible
    async function botTurn(){
      if(remainingPairs <= 0) return;
      turn = 'bot';
      lockBoard = true;
      setStatus("Bot is thinking...");
      await sleep(700);

      // Bot occasionally forgets memory entirely (~10%)
      if(Math.random() < 0.10){
        botMemory = {};
        log(`<div style="color:orange">Bot seems confused and forgot cards!</div>`);
      }

      // Try memory match only half the time
      if(Math.random() < 0.50){
        for(const val in botMemory){
          const idxs = Array.from(botMemory[val]).filter(i => !tiles[i].matched);
          if(idxs.length >= 2){
            // Sometimes skip even known matches
            if(Math.random() < 0.60){
              await botFlipSequence(idxs[0], idxs[1]);
              return;
            }
          }
        }
      }

      // Try guessing with partial memory sometimes
      if(Math.random() < 0.40){
        for(const val in botMemory){
          const idxs = Array.from(botMemory[val]).filter(i => !tiles[i].matched);
          if(idxs.length === 1){
            const knownIdx = idxs[0];
            const unseen = tiles.map((t,i) => i).filter(i => !tiles[i].matched && !tiles[i].flipped);
            if(unseen.length > 0){
              const pick = unseen[Math.floor(Math.random()*unseen.length)];
              await botFlipSequence(knownIdx, pick);
              return;
            }
          }
        }
      }

      // Otherwise pick two random unseen tiles
      const unseenTiles = tiles.map((t,i) => i).filter(i => !tiles[i].matched && !tiles[i].flipped);
      if(unseenTiles.length === 0){ turn = 'player'; lockBoard = false; setStatus("Your turn"); return; }

      let choiceA = unseenTiles[Math.floor(Math.random()*unseenTiles.length)];
      let remainingChoices = unseenTiles.filter(i => i !== choiceA);
      let choiceB = remainingChoices[Math.floor(Math.random()*remainingChoices.length)];

      await botFlipSequence(choiceA, choiceB);
    }

    async function botFlipSequence(i1, i2){
        await sleep(350);
        flipTile(i1, 'bot');
        await sleep(700);
        flipTile(i2, 'bot');
    }
    function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

    // … rest of your unchanged game end, play logic, auth, and init code …
  </script>
</body>
</html>
