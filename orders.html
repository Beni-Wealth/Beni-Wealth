<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Adverts — Beni-Wealth</title>

  <!-- Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>

  <!-- Favicons & Social preview -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <meta name="msapplication-TileImage" content="https://res.cloudinary.com/dq7fpxfbc/image/upload/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">

  <meta property="og:type" content="website">
  <meta property="og:title" content="Beni-Wealth — Earn Steadily">
  <meta property="og:description" content="Complete simple micro-tasks, ptcs, blogs and shortlinks. Advertise efficiently with transparent metrics and fast payouts.">
  <meta property="og:image" content="https://res.cloudinary.com/dq7fpxfbc/image/upload/c_fill,w_1200,h_630/v1752962852/file_00000000401861f8bf6acb6d55fcf2bf_g2fcrf.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#2fe0b8">

  <style>
    :root{--bg:#070611;--panel:#0f0b1f;--border:rgba(255,255,255,.06);--text:#eef3ff;--muted:rgba(255,255,255,.65);--accent:#2fe0b8;--radius:16px;--max:1200px}
    *{box-sizing:border-box}
    body{margin:0;font-family:Poppins,system-ui;background:linear-gradient(180deg,#05040d,#0a0620);color:var(--text)}
    .wrap{max-width:var(--max);margin:auto;padding:16px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px}
    .back{text-decoration:none;color:var(--text);padding:8px 12px;border-radius:10px;background:rgba(255,255,255,.04)}
    .title{font-weight:800}
    .subtitle{color:var(--muted);font-size:13px}
    .toolbar{display:grid;grid-template-columns:1fr auto;gap:10px;margin:16px 0}
    .search{padding:12px;border-radius:12px;border:1px solid var(--border);background:transparent;color:var(--text)}
    .btn{border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;background:var(--accent);color:#04211a}
    .btn.ghost{background:transparent;border:1px solid var(--border);color:var(--muted)}
    .status{margin-bottom:12px;color:var(--muted);font-size:13px}
    .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
    .card{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:var(--radius);padding:14px;display:flex;flex-direction:column;gap:12px}
    .card-head{display:flex;gap:12px;align-items:center}
    .thumb{width:70px;height:54px;object-fit:cover;border-radius:10px;border:1px solid var(--border)}
    .card-title{font-weight:700}
    .meta{color:var(--muted);font-size:12px}
    .desc{color:var(--muted);font-size:14px;line-height:1.45}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .pill{padding:6px 10px;border-radius:999px;font-size:11px;font-weight:700}
    .pill.pending{background:#fff6d6;color:#6a4f00}
    .pill.approved{background:#c9f3df;color:#0a5531}
    .pill.completed{background:#e1ecff;color:#0b3a6d}
  </style>
</head>
<body>
<main class="wrap">
<header>
<a href="dashboard.html" class="back">← Back</a>
<div><div class="title">My Adverts</div><div class="subtitle">Fast & reliable loading</div></div>
</header>
<div class="toolbar">
<input id="search" class="search" placeholder="Search adverts" />
<button id="refresh" class="btn ghost">Refresh</button>
</div>
<div id="diag" class="status">Initializing…</div>
<section id="grid" class="grid"></section>
</main>
<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
import { getFirestore, collection, query, where, onSnapshot } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';
import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';

const firebaseConfig={apiKey:"AIzaSyDy_L7uJeoaWXbUB-LVk_fBv8yHeRjNjZk",authDomain:"beni-wealths.firebaseapp.com",projectId:"beni-wealths",storageBucket:"beni-wealths.firebasestorage.app",messagingSenderId:"807950483822",appId:"1:807950483822:web:e10fa87307e041c4d8417f"};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);
const auth=getAuth(app);

const grid=document.getElementById('grid');
const diag=document.getElementById('diag');
const search=document.getElementById('search');
const refresh=document.getElementById('refresh');

let adverts=[];
let unsub=null;

function card(d){
  const c=document.createElement('div');c.className='card';
  c.innerHTML=`<div class="card-head">${d.thumbnail?`<img class=thumb src=\"${d.thumbnail}\">`:''}<div><div class="card-title">${d.title||'(untitled)'}</div><div class="meta">${d.platform||''}</div></div></div><div class="desc">${(d.description||'').slice(0,120)}</div><div class="row"><span class="pill ${(d.status||'pending').toLowerCase()}">${(d.status||'pending').toUpperCase()}</span></div>`;
  return c;
}

function render(){
  const q=(search.value||'').toLowerCase();
  grid.innerHTML='';
  let found=false;
  adverts.forEach(d=>{
    if(q && !(d.title||'').toLowerCase().includes(q)) return;
    grid.appendChild(card(d));found=true;
  });
  if(!found) grid.innerHTML='<div class="status">No adverts found</div>';
}

onAuthStateChanged(auth,u=>{
  if(!u){diag.textContent='Please sign in';return;}
  diag.textContent='Loading adverts…';
  const q=query(collection(db,'advertise_tasks'),where('createdBy','==',u.uid));
  unsub=onSnapshot(q,s=>{
    adverts=s.docs.map(d=>d.data());
    diag.textContent=`${adverts.length} adverts loaded`;
    render();
  },e=>diag.textContent='Failed to load adverts');
});

search.oninput=render;
refresh.onclick=()=>{if(unsub){unsub();unsub=null;} adverts=[];render();diag.textContent='Refreshed';};
</script>
</body>
</html>
